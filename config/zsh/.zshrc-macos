# Oh-my-posh
eval "$(oh-my-posh init zsh --config $CONFIG/oh-my-posh/default.omp.json)"

#------------------------------------------------------
# Completions
#------------------------------------------------------

# fzf 🌸 A command-line fuzzy finder
eval "$(fzf --zsh)"

# Homebrew 🍺 The missing package manager for macOS (or Linux)
if type brew &>/dev/null
then
  FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"

  # Google Cloud SDK
  source "$(brew --prefix)/share/google-cloud-sdk/path.zsh.inc"
  source "$(brew --prefix)/share/google-cloud-sdk/completion.zsh.inc"

  # zsh-autosuggestions 🌟 Fish-like autosuggestions for zsh
  source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
  ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=220,bold"
  ZSH_AUTOSUGGEST_STRATEGY=(history completion)
fi

setopt LIST_PACKED
setopt AUTO_PARAM_SLASH

zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path "$XDG_CACHE_HOME/zsh/.zcompcache"

# zstyle ':completion:*' completer _extensions _complete _approximate
zstyle ':completion:*' menu select # interactive search
zstyle ':completion:*' file-sort modification follow
zstyle ':completion:*' squeeze-slashes true
# zstyle ':completion:*' complete-options true
zstyle ':completion:*' group-name ''
zstyle ':completion:*:*:-command-:*:*' group-order alias builtins functions commands
# zstyle ':completion:*' file-list all
# zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
# zstyle ':completion:*' matcher-list '' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*'

zstyle ':completion:*:*:*:*:descriptions' format '%F{green}-- %d --%f'
zstyle ':completion:*:*:*:*:corrections' format '%F{yellow}!- %d (errors: %e) -!%f'
zstyle ':completion:*:messages' format ' %F{purple} -- %d --%f'
zstyle ':completion:*:warnings' format ' %F{red}-- no matches found --%f'

_comp_options+=(globdots)
autoload -U compinit
compinit
